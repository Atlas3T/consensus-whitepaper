Confidential transactions on blockchains were introduced by G. Maxwell~\cite{confidential} as new data structures to allow for the transfer of tokens between digital addresses in such a way that only the amount or number of tokens exchanged is hidden, offering more privacy to the users. The amount obfuscation is achieved via the use of Pedersen commitment (PC). A Pedersen commitment is of the form  $C = vH + bG$ where $G$ and $H$ are two distinct generators of the EC, $v$ is an amount of tokens hidden in $C$ and $b$ is the PC mask, often referred as a blinding factor.\\

In this paper, PC are used to obfuscate the amount of tokens $v_{i}$ associated to an account stored on the ledger. The PC has the following form: $C_{i} = v_{i}H + b_{i}G$ and obfuscates the balance of an account in KAT tokens, represented by an integer $v_{i} \in \mathbb{Z}_M$ (with $M$ the maximum number of tokens defined in Catalyst system). Said balance is hidden using a blinding factor $b_{i} \in  \mathbb{Z}_p$ ($p \gg M$). $G$ and $H$ in $C_{i}$ are two distinct generators of the elliptic curve. These two generators are in fact two different base points of the same subgroup of EC points such that the discrete logarithm is preserved, \textit{i.e.} the $x$ value in the relation $xG = H$ (or $xH = G$) is unknown. As a result, the two EC points $v_{i}H$ and $b_{i}G$ are added to form a valid EC point, \textit{e.g} the Pedersen Commitment. Using compression techniques, an EC point on Curve25519 amounts to 32 bytes, leading to a Pedersen Commitment (PC) size of 32 bytes.\\

Given the cyclic property of an EC, a PC of the form $C = xH + yG$ can therefore be rewritten as:
\begin{center}
$C = (x \text{ $mod$ } l_H) H + (y \text{ $mod$ } l_G) G$
\end{center}
Where $l_G$ is the order of the generator $G$ (or number of points on the elliptic curve defined over $G$) and $l_H$ is the order of generator $H$.\\ 


The use of PC provides a cryptographically secure method to mask the amount spent (or received) in a transaction. Furthermore, the sum of the PCs in a transaction can be used to prove that the sum of the amounts spent and received in a transaction amounts to 0 KAT tokens, \textit{i.e.} the transaction does not create or destroy tokens. Assume a transaction with $n$ PCs, the sum must verify: $\sum_{i=1}^n C_i = 0H + xG$ where $xG = \sum_{i=1}^n b_iG$.  \\

\textcolor{bulg}{On the Catalyst ledger we take advantage of the cyclical nature of elliptic curve and allow the use of positive as well as negative numbers of tokens to be contained within a PC. In truth these negative numbers are actually positive and very large numbers. For example a user sending 5 KATs would make a commitment including a negative amount $-5$ as follows: $C = (l_H - 5 \text{ $mod$ } l_H) H + (y \text{ $mod$ } l_G) G$. As explained in chapters~\ref{Cha:LDA} and~\ref{Cha:Tra}, the use of positive and negative numbers offers a better anonymity solution to users as the nature of a transfer embedded in a commitment (whether it consists in spending or receiving tokens) needs not be specified in a transaction. The group of commitments in a transaction can simply be added together in order to verify no new tokens are created (or tokens destroyed) in the transaction.} \\

Since $0H=l_HH$, it is in practise be possible to generate a PC with a very large number of tokens, with the malicious aim to create new tokens while producing a valid PC sum. In order to circumvent this problem, we use range proofs. Range proofs enable a user to prove that an amount lies between a specific range of values without revealing the amount. The range of values chosen for a range proof is $[0,M]$ where $M$ represents the maximum number of tokens allowed per account ($M \ll l_H$).\\

Confidential transactions have a cumbersome feature with respect to non-confidential ones, that is a clear increase of a transaction size as well as the generation and verification times. The range proof associated to a transaction PC is the primary cause for the transaction size increase. This leads to a lack of scalability and a significant increase in transaction fees compared to non-confidential transactions. The Bulletproof protocol is a new zero-knowledge proof protocol \cite{bulletproof} which proposes an improved inner product argument algorithm which results in a greatly reduced size of the range proof associated to a PC.  While traditional range proof sizes are typically linear in the bit-length $n$ of the range proof, Bulletproof provides a significant saving by creating range proof where only $[2~log_2(n) + 9]$ group and field elements are required. Moreover, Bulletproof protocol allows to generate aggregated range proofs with a size that grows logarithmically in the number of commitments, offering a faster batch verification time.  The range proof generated for confidential transactions on Catalyst ledger are produced using the Bulletproof protocol. 
